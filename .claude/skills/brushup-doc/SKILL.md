---
name: brushup-doc
description: 指定された章のドキュメント（index.md）の文章品質を向上させ、内容を充実化する。わかりやすさ・読みやすさの改善と、説明の補足・Tips追加を行う。
allowed-tools: Read, Edit, Glob, Grep, WebSearch
argument-hint: <章のドキュメントパス or 章番号（例: chapter3 or packages/@ai-suburi/docs/docs/chapter3/index.md）>
---

# ドキュメントブラッシュアップスキル

指定された章のドキュメント（`index.md`）の文章品質を向上させ、内容をより充実したものにする。

## 手順

### Step 1: 対象ファイルの特定

1. `$ARGUMENTS` から章番号またはドキュメントパスを判定する
   - `chapter3` や `3` → `packages/@ai-suburi/docs/docs/chapter3/index.md`
   - フルパスが渡された場合はそのまま使用
2. 対応するソースコードディレクトリを特定する（例: `packages/@ai-suburi/core/chapter3/`）

### Step 2: ドキュメントとソースコードの読み込み

1. ドキュメントファイル（`index.md`）を読み込む
2. 対応するソースコードディレクトリ内の全 `.ts` ファイルを `Glob` で列挙し、各ファイルを読み込む
3. ドキュメント全体のセクション構成を把握する

### Step 3: 文章品質の改善

各セクションの説明文について、以下の観点で改善する:

#### 3-1. わかりやすさの向上

- **専門用語の初出時に補足を追加**: 技術用語が初めて登場する箇所に、簡潔な説明やカッコ書きの補足を追加する
- **抽象的な説明を具体化**: 「〜できます」のような曖昧な記述を、具体的なユースケースや例を添えた説明にする
- **長文の分割**: 一文が80文字を超える場合、2つ以上の文に分割することを検討する
- **主語と述語の明確化**: 主語が省略されて意味が曖昧になっている文を修正する

#### 3-2. 読みやすさの向上

- **段落構成**: 1つの段落が5行を超える場合、適切な箇所で段落を分割する
- **接続詞の改善**: 「また」「そして」の多用を避け、適切な接続表現（「具体的には」「一方で」「これにより」など）に置き換える
- **箇条書きの活用**: 3つ以上の要素を列挙している文は、箇条書き形式に変換することを検討する
- **冗長表現の除去**: 「〜することができます」→「〜できます」、「〜という」の不要な使用を削除するなど、冗長な表現を簡潔にする

#### 3-3. 文体の統一

- ドキュメント全体で「です・ます調」を統一する
- 技術ドキュメントとしてのフォーマルさを維持しつつ、教科書的な読みやすさを確保する
- コードの説明に使う表現パターンを統一する（例: 「〜を定義します」「〜を指定します」）

### Step 4: 内容の充実化

各セクションについて、以下の観点で内容を追加・拡充する:

#### 4-1. 概要説明の強化

- セクションの冒頭に「なぜこの機能が必要か」「どういう場面で使うか」の説明がなければ追加する
- 既存の概要が1文のみの場合、2〜3文に拡充し、背景や目的を明確にする

#### 4-2. コード解説の補足

- ソースコード内の重要なポイント（API呼び出し、エラーハンドリング、設定値など）について、コードブロックの前後に解説がなければ追加する
- 「このサンプルでは以下を行います」の箇条書きが、実際のコードの主要な処理ステップを網羅しているか確認し、不足があれば追加する
- コード内の重要なパラメータや設定値について、選択理由や推奨値の説明を追加する

#### 4-3. Tips・注意事項の追加

- 実装時にハマりやすいポイントがあれば `:::caution` アドモニションで追加する
- 便利なテクニックや代替手法があれば `:::tip` アドモニションで追加する
- 追加の背景情報や参考になる情報があれば `:::info` アドモニションで追加する
- ただし、アドモニションの追加は1セクションあたり最大2つまでとし、過剰にならないようにする

#### 4-4. 比較・対照の追加

- 類似する機能（例: JSONモード vs Structured Outputs）がある場合、違いや使い分けを説明するテーブルや文章を追加する
- 前のセクションとの関連性を示すつなぎの文章を追加する

#### 4-5. 実行結果の例示

- サンプルコードの実行結果例がない場合、想定される出力をコードブロックで追加する
  ```
  **実行結果の例:**

  \```
  Response: こんにちは！今日の天気は...
  Total Tokens: 42
  \```
  ```

### Step 5: 参考文献の拡充

- 各セクションで紹介しているAPI・ライブラリの公式ドキュメントへのリンクが参考文献セクションにあるか確認する
- 不足している場合は `WebSearch` で正しいURLを確認してから追加する
- リンクはセクション番号順に整理する

### Step 6: 修正の適用

発見した改善点をすべて `Edit` ツールで適用する。

## 修正時のルール

- 既存のセクション構成パターン（見出し→概要→詳細→コード→実行方法）を崩さない
- コードブロックの `title` 属性は `chapter<N>/<ファイル名>.ts` の形式を維持する
- コードブロック内のソースコードは変更しない（コードの修正は `review-doc` スキルの担当）
- 事実に基づかない内容は追加しない。不確実な場合はユーザーに確認を取る
- 追加する内容はソースコードの実装内容と矛盾しないようにする
- 1セクションの大幅な書き換えが必要な場合は、修正前にユーザーに方針を確認する
- 参考文献セクションの順序は、セクション番号順に並べる

## 出力

ブラッシュアップ完了後、以下の形式でサマリーを出力する:

```
## ブラッシュアップ結果サマリー

### 文章品質の改善
- [ 改善内容1 ]
- [ 改善内容2 ]
- ...

### 内容の充実化
- [ 追加内容1 ]
- [ 追加内容2 ]
- ...

### 参考文献の追加
- [ 追加したリンク ]
- ...

### 変更していない項目
- [ 理由とともに記載 ]

### ユーザーへの提案（ある場合）
- [ 提案内容（図の追加、セクション分割など、自動では判断しにくい改善案）]
```
